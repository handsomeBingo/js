<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>放大镜</title>
    <style>
        *{
            margin:0;
            padding:0;
        }
        .box{
            position: relative;
            width: 350px;
            height:350px;
            background: url("1.鼠标跟随/images/iphone.jpg") no-repeat;
            box-shadow:3px 3px 10px #111;
            margin:10px;
        }
        .box .innerBox{
            display: none;
            position: absolute;
            width:175px;
            height:175px;
            background: darkorange;
            opacity:0.5;
            cursor: move;
        }
       .box .bigImgBox{
           display: none;
           width: 350px;
           height: 350px;
           position: absolute;
           left: 380px;
           box-shadow: 3px 3px 10px #111;
           overflow: hidden;
        }
        .box .bigImgBox img{
            display: block;
            width:200%;
            height:200%;
            border:none;
            vertical-align: top;
            position: absolute;
        }
    </style>
</head>
<body>
<div class="box" id="box">
    <div class="innerBox" id="innerBox"></div>
    <div class="bigImgBox" id="bigImgBox"><img id="bigImg" src="1.鼠标跟随/images/iphone_big.jpg" alt=""></div>
</div>
</body>
<script>
    var box=document.getElementById("box");
    var innerBox=document.getElementById("innerBox");
    console.log(innerBox);
    var bigImgBox=document.getElementById("bigImgBox");
    console.log(bigImgBox);
    var bigImg=document.getElementById("bigImg");
    box.onmousemove=function(e){
        e=e||window.event;
        innerBox.style.display="block";
        bigImgBox.style.display="block";
        var l= e.clientX-this.offsetLeft-innerBox.offsetWidth/2;
        var t= e.clientY-this.offsetTop-innerBox.offsetHeight/2;

        //把算好的值赋值回去
        //由于存在边界问题，我们需要将最大的left和最小的left规定好，即当最小值小于规定最小值的时候，就让最小值等于规定最小值，最大值同理
        var minL=0;
        var minT=0;
        //最大值的left是大盒子的宽度-小盒子的offsetWidth
        var maxL=box.clientWidth-innerBox.offsetWidth;
        var maxT=box.clientHeight-innerBox.offsetHeight;
        //接下来通过判断确定最大值和和最小值
        if(l<minL){
            l=minL;
        }else if(l>maxL){
            l=maxL;
        }if(t<minT){
            t=minT;
        }else if(t>maxT){
            t=maxT;
        }
        innerBox.style.left=l+"px";
        innerBox.style.top=t+"px";
        //计算右面图片的left和top的值，如果左面遮罩橘色盒子移动1px,那么右面的大图片对应向相反的方向，即右侧移动2px,即2倍关系
        bigImg.style.left=-2*l+"px";
        bigImg.style.top=-2*t+"px";

    }
    box.onmouseout=function(){
        innerBox.style.display="none";
        bigImgBox.style.display="none";
    }
</script>
</html>