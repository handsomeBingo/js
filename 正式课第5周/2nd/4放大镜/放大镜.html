<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>放大镜</title>
    <style>
        *{
            margin:0;
            padding:0;
        }
        .box{
            position: relative;
            width:350px;
            height:350px;
            background: url("img/iphone.jpg") no-repeat;
            box-shadow: 3px 3px 10px #111;
            margin: 10px;
        }
        .box .innerBox{
            display: none;
            width:175px;
            height:175px;
            opacity: 0.5;
            background: darkorange;
            position: absolute;
            top:0;
            left:0;
            cursor: move;
        }
        .box .bigImg{
            display: none;
            width:350px;
            height:350px;
            position: absolute;
            left:380px;
            box-shadow: 3px 3px 10px #111;
            overflow: hidden;
        }
        .box .bigImg img{
            position: absolute;
            display: block;
            width:200%;
            height:200%;
            border: none;
            vert-align:top;
        }
    </style>
</head>
<body>
<div class="box" id="box">
    <div class="innerBox" id="inner"></div>
    <div class="bigImg" id="bigImg"><img id="bImg" src="img/iphone_big.jpg" alt=""></div>
</div>
</body>
<script>
    /*
    * 目的是为了看得清；
    *
    * */
    var box=document.getElementById("box");
    var innerBox=document.getElementById("inner");
    box.onmousemove=function(e){
        e=e||window.event;
        innerBox.style.display="block";//鼠标移动时需要遮罩盒子显示
        //算出里面小盒子的坐标
        var l= e.clientX-box.offsetLeft-innerBox.offsetWidth/2;
        var t=e.clientY-box.offsetTop-innerBox.offsetHeight/2;
        //把算好的坐标赋值回去
        //由于存在边界问题我们需要处理最大的left值和最小left值
        var minL=0;
        var minT=0;
        var maxL=box.clientWidth-innerBox.offsetWidth;
        var maxT=box.clientHeight-innerBox.offsetHeight;
        var bigImg=document.getElementById("bigImg");
        var bImg=document.getElementById("bImg");
        if(l<minL){//如果比最小值还小，就赋值为最小值
            l=minL;
        }else if(l>maxL){//如果比最大值还大，就赋值为最大值
            l=maxL;
        }
        if(t<minT){
            t=minT;
        }else if(t>maxT){
            t=maxT;
        }

            innerBox.style.left=l+"px";
            innerBox.style.top=t+"px";
        //计算右侧图片left和top的值：如果左侧橘色的遮罩盒子移动1px那么右侧大图片对应向相反的方向（右）移动2px，即2倍
        bImg.style.left=-2*l+"px";
        bImg.style.top=-2*t+"px";
        bigImg.style.display="block";
    };
    box.onmouseout=function(){
        innerBox.style.display="none";
        bigImg.style.display="none";
    }



</script>
</html>