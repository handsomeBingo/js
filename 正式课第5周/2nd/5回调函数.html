<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>回调函数</title>
</head>
<body>
<script>
//    animate(ele,target,duration,effect,callback);
    //forEach不兼容，改写,forEach的第二个参数是修改第一个参数（回调函数）的this的。
    //myForEach
    Array.prototype.myForEach=function(callback,obj){
        //callback执行多少次依赖于当前实例，即任意一个数组，在原型方法上使用this即可
        //obj参数就是修改callback中的this的
        for(var i=0;i<this.length;i++){
            typeof callback=="function"?callback.call(obj,this[i],i,this):void 0;
        }
    }
    var ary=[1,1,1,1];
    var obj={l:1};
    ary.myForEach(function(item,index,oriAry){
        console.log(item,index,oriAry);
        console.log(this);
    },obj);
    //改写map
    Array.prototype.myMap=function(callback,obj){
        var ary=[];
        for(var i=0;i<this.length;i++){
            if(typeof callback=="function"){
               var val= callback.call(obj,this[i],i,this);
            }
            ary.push(val);
        }
        return ary;
    }


</script>
</body>
</html>