<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            margin:0;
            padding:0;
        }
        #box{
            width: 100px;
            height:100px;
            position: absolute;
            background: red;
        }
    </style>
</head>
<body>
<div id="box"></div>
</body>
<script>
    var oDiv=document.getElementById("box");
    function center(){
        var l=((document.documentElement.clientWidth||document.body.clientLeft)-oDiv.offsetWidth)/2;
        var t=((document.documentElement.clientHeight||document.body.clientHeight)-oDiv.offsetHeight)/2;
        oDiv.style.left=l+"px";
        oDiv.style.top=t+"px";//以上4行代码是让盒子在页面内居中
    }
    center();
    window.onresize=center;//onresize事件是当元素尺寸改变时

    oDiv.onmousedown=function(e){
        //1、先绑定onmousedown事件
        //2、在onmousedown事件中，绑定onmousemove和onmouseup
        //3、onmousemove中需要时时计算left和top并赋值回去
        //4、onmouseup的时候把onmousemove清空
        e=e||window.event;
        this.setCapture?this.setCapture():void 0;//这个方法是让oDiv和鼠标有一个联系关系，但是这个方法在chrome没有，火狐和ie都有
        var x= e.clientX-this.offsetLeft;//鼠标相对于盒子的x向的偏移量
        var y= e.clientY-this.offsetTop;//鼠标相对于盒子的y向的偏移量
        //x,y在整个拖拽中是不变的，所以要存到盒子本身身上
        this.x=x;
        this.y=y;
        document.onmousemove=function(e){
            e=e||window.event;
            //在拖拽的过程中，盒子的新位置，用鼠标的位置减去鼠标相对于盒子的偏移量
            var l= e.clientX-oDiv.x;
            var t= e.clientY-oDiv.y;
            //设置一个边界问题
            var minL=0;
            var minT=0;
            var maxL=(document.documentElement.clientWidth||document.body.clientLeft)-oDiv.offsetWidth;
            var maxT=(document.documentElement.clientHeight||document.body.clientHeight)-oDiv.offsetHeight;
            l= l<minL?minL:l>maxL?maxL:l;
            t= t<minT?minT:t>maxT?maxT:t;
            oDiv.style.left=l+"px";
            oDiv.style.top=t+"px";
        }
        document.onmouseup=function(){
            document.onmousemove=null;
            oDiv.releaseCapture?oDiv.releaseCapture():void 0;//释放鼠标和元素和解除连接关系
        }

    }

    //在chrome中将mousemove和onmouseup绑定给document。



</script>
</html>