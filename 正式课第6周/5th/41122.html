<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #div1{
            width:500px;;
            height:300px;
            border:1px solid black;
            line-height: 300px;
            font-size: 40px;
            margin:200px auto;
            border-radius: 5px;
        }
        #div2{

        }
    </style>
</head>
<body>
<div id="div1">将文件拖至此</div>
<div id="div2"></div>
</body>
</html>
<script>
    var oDiv1=document.querySelector("#div1");//目标元素
    var oDiv2=document.querySelector("#div2");

    oDiv1.ondragenter=function(e){
        this.innerHTML="set mouse free";
    }
    oDiv1.ondragover=function(e){
        e.preventDefault();//阻止浏览器默认的关闭功能

    }
    oDiv1.ondrop=function(e){
        e.preventDefault();//阻止浏览器默认打开图片功能
        this.innerHTML="drag files here";
        //这时候拖拽元素就在目标元素内了
        var files= e.dataTransfer.files;//获得所有的拖拽的文件列表
        console.log(files);
        for(var i=0;i<files.length;i++){
            //遍历获得文件
            showImg(files[i]);
        }
    }
function showImg(file){
   // debugger;
    if(typeof FileReader!="undefined"){

        var reader=new FileReader();//创建读取文件信息的实例
        reader.readAsDataURL(file);
        var type=file.type;
        var size=Math.floor(file.size/1024);
        console.log(type);
        if(!/image\//.test(type)){
            return false;
        }
        if(size>500){
            return false;
        }
        //把文件以DataURL读取
        reader.onload=function(){//监听reader是否读取成功了
           //读取出来的数据放在this.result中
            console.log(123);
            oDiv2.innerHTML+="<img src="+this.result+"><p>图片名称："+file.name+"</p><p>图片类型："+file.type+"</p>";

        }

    }

   /* if(typeof FileReader!="undefined"){
        var reader=new FileReader();//创建读取文件信息的实例
        var type=file.type;
        var size=file.size;
        reader.readAsBinaryString(file);//把文件以DataURL读取
        reader.onload=function(){//监听reader是否读取成功了
            //读取出来的数据放在this.result中
            console.log(this.result);
            //二进制字符串转化为（btoa）64位编码
            //将base64和图片类型，拼成一个DataURL地址
            /!*oDiv2.innerHTML+="<img src="'data:image/jpeg;base64,'+btoa(this.result)+"><p>图片名称："+file.name+"</p><p>图片类型："+file.type+"</p>";*!/

            oDiv2.innerHTML+="<img src="+"data:image/jpeg;base64,/"+btoa(this.result)+"/>";
        }

    }*/


}

</script>