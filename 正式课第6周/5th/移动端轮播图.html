<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <style>
  /*      #div1{
            width:200px;
            height:200px;
            background: red;
        }
        #div1:hover{
            width:300px;
            transition-property:width;!*改变css属性，通过改变css属性值从起点到终值的平滑过渡效果*!      transition-duration:1s;
            transition-timing-function:ease;
            transition-delay: 1s;
            !*!transition:width 1s;*!
            -webkit-transform: translate(50px);
            -moz-transform: translate(50px);
            -ms-transform: translate(50px);
            -o-transform: translate(50px);
            transform: translate(50px);
            transition: 1s;
            -webkit-transition: 1s;*/
        *{
            margin:0;
            padding:0;
        }
        #outer{
            position: relative;
            width:100%;
            height:300px;
            overflow: hidden;
        }
        #inner{
            width:500%;
            height:100%;
            list-style: none;
        }
        .inner li{
            width:20%;
            height:100%;
            float: left;
        }
        .inner li:nth-child(1){background: aqua}
        .inner li:nth-child(2){background: yellow}
        .inner li:nth-child(3){background: red}
        .inner li:nth-child(4){background: green}
        .inner li:nth-child(5){background: pink}
       #items{
           position: absolute;
           right:5%;
           bottom:5%;
       }
        #items span{
            display: inline-block;
            width:25px;
            height:25px;
            line-height: 25px;
            border-radius: 50%;
            text-align: center;
            background: wheat;
            color: #fff;
        }
        #items span.cur{
            background: deeppink;
        }
    </style>
</head>
<body>
<!--width:默认980；
device-width:设备宽度

initial-scale：默认缩放值
maximum-scale：最大缩放值
minimum-scale：最小缩放值
user-scalable：用户缩放值-->

<div id="outer" class="outer">
    <ul id="inner" class="inner">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <div id="items">
        <span class="cur">1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span>
    </div>
</div>
</body>
<script>
    //this只在当前作用域中起作用，如果要跨作用域需要借助变量
    var slider={
        init:function(ele){
            this.inner=ele.inner||{};//没传值时是空对象
            this.oLis=ele.oLis||{};
            this.oSpan=ele.oSpan||{};
            var that=this;
            [].forEach.call(this.oLis,function(item,index){
                item.index=index;
                item.addEventListener("touchstart",that.start,false);
                item.addEventListener("touchmove",that.move,false);
                item.addEventListener("touchend",that.end,false);
            })

        },
        start:function(e){
            this.startX= e.changedTouches[0].pageX;//按下坐标
            this.time=+new Date();//=new Date().get time();按下的毫秒数


        },
        move:function(e){
            /*console.log(e.touches[0]);
            console.log(e.targetTouches[0]);
            console.log(e.changedTouches[0]);*/


            var moveX= e.changedTouches[0].pageX;
            var time=+new Date();
            var index=this.index;
            this.flag=true;
            if(time-this.time>25){//滑动时间大于25ms再滑动
                var movePos=moveX-this.startX;//滑动距离，有正负，右滑正，左滑负
                this.movePos=movePos;
                //计算当前位置(ul向左移动多少距离到当前屏幕)
                var offset=-this.offsetWidth*index+moveX;
                //ul最终设置的距离
                var pos=offset+movePos;
                slider.inner.style.webkitTransform="translate("+pos+"px)";
            }else {
                this.flag=false;
            }


        },
        end:function(e){
            if(this.flag){//只有滑动的时候才会进来，但是start和end方法
                var index=this.index;
                var len=slider.oLis.lengthl;
                if(this.movePos>0){
                    //上一张索引
                    this.nPreIndex=index==0?0:index-1;
                }else if(this.movePos<0){
                    //下一张的索引
                    this.nPreIndex=index==len-1?len-1:index+1;
                }
                var pos=-this.offsetWidth*this.nPreIndex;//上一张或下一张显示在屏幕上应该移动的距离
                slider.inner.style.webkitTransform="translate("+pos+"px)";
                slider.inner.style.webkitTransition="0.7s";
                var nIndex=this.nPreIndex;
                slider.inner.addEventListener("webkitTransitionEnd",function(){
                    this.style.webkitTransition="";//清除动画累积，相当于清除定时器
                    slider.setItem(nIndex);
                },false)
            }

        },
        setItem:function(index){//动画结束后设置焦点选中效果；
            [].forEach.call(this.oSpan,function(item){
                item.className="";
            });
            this.oSpan[index].className="cur";
        }

    }

    var obj={
        inner:document.querySelector("#inner"),
        oLis:document.querySelectorAll("#inner li"),
        oSpan:document.querySelectorAll("#items span"),




    };//真实的初始化数据
    slider.init(obj);



</script>
</html>