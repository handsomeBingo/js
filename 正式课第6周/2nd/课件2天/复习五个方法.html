<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
</head>

<body>
</body>
</html>
<script>
function bind(ele,eventType,fn){
	if(ele.addEventListener){
		ele.addEventListener(eventType,fn);
		return ;
		}
		if(!ele["mybind"+eventType]){
			ele["mybind"+eventType]=[];
			}
		var a=ele["mybind"+eventType];
		var temp=function(){
			fn.call(ele);
			}
		temp.origin=fn;
		for(var i=0;i<a.length;i++){
			if(a[i].origin==fn)
			return;
			}
		a.push(temp);
		
		ele.attachEvent("on"+eventType,temp);
	
	}
	function unbind(ele,eventType,fn){
		if(ele.removeEventListener){
			ele.removerEventListener(eventType,fn,false);
			return;
		}
		var a = ele["mybind"+eventType];
		for(var i = 0; i<a.length;i++){
			var cur = a[i];
			if(cur.origin===fn){
				a.splice(i,1);
				i--;
				ele.detachEvent('on'+eventType,cur);
				break;
				}
			}
		
	}
	function on(ele,eventType,fn){
		if(ele.addEventListener){
			ele.addEventListener(eventType,fn,false);
			return;
			}
		if(ele["myEvent"+eventType]){
			ele["myEvent"+eventType] = [];
			ele.attachEvent("on"+eventType,function(){
				run.call(ele);
				})
			}
		var a = ele["myEvent"+eventType];
		for(var i=0;i<a.length;i++){
			if(a[i] == fn){
				return;
				}
			}
			a.push(fn);		
		}
		function off(ele,eventType,fn){
			var a=ele["myevent"+eventType];
			for(var i=0;i<a.length;i++){
				if(a[i]==fn){
					a[i]=null;
					break;
					}
				}
			}
	function run(){
		var e = window.event;
		var a = this['myEvent'+e.type];
		for(var i = 0; i < a.length; i++){
			if(typeof a[i] == 'function'){
				a[i].call(this,e);
			}else{
				a.splice(i,1);
				i--;
			}
		}
	}
</script>
