<!DOCTYPE html>
<html lang="en" ng-app="appModule">
<head>
    <meta charset="UTF-8">
    <title>shouw</title>
</head>
<body>
<group>
    <open title="标题1">这是第一个展开的内容</open>
    <open title="标题2">这是第一个展开的内容</open>
    <open title="标题2">这是第一个展开的内容</open>
</group>
</body>
<script src="node_modules/angular/angular.js"></script>
<script>
    var app = angular.module("appModule", []);
    app.directive("group", function () {
        return {
            controller: function ($scope) {
                $scope.scps = [];
                this.add = function (s) {
                    $scope.scps.push(s);
                };
                //这个方法是为了判断除了当前传过来的其他的作用域的flag都为false；
                //父级会接受一个当前作用域，在当前数组中查找，除了当前的其他都隐藏
                this.close=function(s){
                    $scope.scps.forEach(function(item){
                        if(item!==s){
//                            console.log(123)
                            item.flag=false;
                        }
                    })
                }

            },
//            scope:{}
        }
    });
    app.directive("open", function () {
        return {
            restrict: "E",
            templateUrl: "temp.html",
            require: "^group",
            transclude: true,
            link: function (scope, ele, attrs, groupCtrl) {
                groupCtrl.add(scope);
                scope.flag = true;
                scope.show = function () {
                    scope.flag = !scope.flag;
                    groupCtrl.close(scope);

                };
//                debugger;


            },
            scope: {
                title: "@title"
            }
        }
    })
    ;
    console.dir(typeof open);
    //同一时间只能有一个打开：
    //1、首先先把每一个人的scope都交给一个人管理，管理者肯定有一个接收的方法
    //2、当我点击确定的某一个时，将自己的取反，告诉管理者除了自己的，其余的全部关闭，管理者要有一个关闭的方法；
    //管理者又是一个指令，这是指令之间的交互；
</script>
</html>